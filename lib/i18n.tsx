"use client";

import { createContext, useContext, useState, useCallback, type ReactNode } from "react";

export type Locale = "ar" | "en" | "fr";

type Translations = Record<string, string>;

const translations: Record<Locale, Translations> = {
  ar: {
    // Navbar
    "nav.home": "الرئيسية",
    "nav.simulator": "المحاكي",
    "nav.analyzer": "محلل الاحتيال",
    "nav.legal": "الوعي القانوني",

    // Landing
    "hero.alert": "التهديدات السيبرانية تتزايد في تونس",
    "hero.title1": "احمِ نفسك من",
    "hero.title2": "التهديدات الرقمية",
    "hero.subtitle": "محاكي تدريب تفاعلي مدعوم بالذكاء الاصطناعي — يُعلّمك كشف الاحتيال الإلكتروني والتصيد والمخاطر الرقمية الحقيقية في تونس",
    "hero.cta": "ابدأ التدريب",
    "hero.cta2": "حلل رسالة مشبوهة",
    "hero.threat.sms": "التصيد عبر SMS",
    "hero.threat.wifi": "احتيال الواي فاي",
    "hero.threat.password": "سرقة كلمات المرور",
    "hero.threat.privacy": "انتهاك الخصوصية",
    "hero.threat.fake": "المواقع المزيفة",

    // Features
    "features.title": "أدوات الحماية",
    "features.subtitle": "كل ما تحتاجه لحماية نفسك من التهديدات الإلكترونية",
    "features.sim.title": "محاكي التصيد الاحتيالي",
    "features.sim.desc": "تدرب على كشف رسائل التصيد الحقيقية التي تستهدف التونسيين — من البريد التونسي إلى البنوك والـ WhatsApp",
    "features.analyzer.title": "محلل الاحتيال بالذكاء الاصطناعي",
    "features.analyzer.desc": "الصق أي رسالة أو رابط مشبوه واحصل على تحليل فوري لمستوى الخطر مع شرح مبسط",
    "features.legal.title": "الوعي القانوني",
    "features.legal.desc": "تعرف على القوانين التونسية المتعلقة بالجرائم الإلكترونية من خلال سيناريوهات تفاعلية",
    "features.start": "ابدأ الآن",

    // Stats
    "stats.attacks": "زيادة الهجمات السيبرانية في تونس",
    "stats.unaware": "من التونسيين لا يعرفون كيف يحمون أنفسهم",
    "stats.phishing": "التصيد الاحتيالي أكثر تهديد شيوعاً",

    // Footer
    "footer.desc": "مشروع تعليمي لحماية المواطنين التونسيين من التهديدات الرقمية",

    // Simulator
    "sim.title": "محاكي التصيد الاحتيالي",
    "sim.subtitle": "هل تقدر تفرّق بين الرسائل الحقيقية والاحتيالية؟",
    "sim.score": "النتيجة",
    "sim.scenario": "السيناريو",
    "sim.question": "ما رأيك في هذه الرسالة؟",
    "sim.safe": "آمنة — أثق بها",
    "sim.suspicious": "مشبوهة — غير متأكد",
    "sim.scam": "احتيال — لا أثق بها",
    "sim.analyzing": "جاري التحليل بالذكاء الاصطناعي...",
    "sim.correct": "إجابة صحيحة!",
    "sim.wrong": "إجابة خاطئة!",
    "sim.correctAnswer": "الإجابة الصحيحة",
    "sim.analysis": "التحليل",
    "sim.redFlags": "العلامات التحذيرية",
    "sim.tactic": "الأسلوب النفسي المستخدم",
    "sim.advice": "نصيحة",
    "sim.next": "السيناريو التالي",
    "sim.showResults": "عرض النتائج",
    "sim.complete": "اكتمل التدريب!",
    "sim.correctCount": "أجبت بشكل صحيح على",
    "sim.of": "من",
    "sim.scenarios": "سيناريو",
    "sim.excellent": "ممتاز! أنت واعٍ بالتهديدات السيبرانية",
    "sim.needMore": "تحتاج المزيد من التدريب لحماية نفسك",
    "sim.restart": "أعد التدريب",
    "sim.easy": "سهل",
    "sim.medium": "متوسط",
    "sim.hard": "صعب",
    "sim.answerScam": "احتيال",
    "sim.answerSuspicious": "مشبوه",
    "sim.answerSafe": "آمن",
    "sim.generating": "جاري إنشاء السيناريوهات بالذكاء الاصطناعي...",
    "sim.error": "خطأ",
    "sim.retry": "إعادة المحاولة",

    // Analyzer
    "analyzer.title": "محلل الاحتيال بالذكاء الاصطناعي",
    "analyzer.subtitle": "الصق أي رسالة أو رابط مشبوه واحصل على تحليل فوري",
    "analyzer.placeholder": "الصق الرسالة المشبوهة هنا...",
    "analyzer.chars": "حرف",
    "analyzer.inputHint": "SMS, بريد إلكتروني, أو رابط",
    "analyzer.clear": "مسح",
    "analyzer.analyze": "حلّل",
    "analyzer.analyzing": "جاري التحليل...",
    "analyzer.tryExamples": "أو جرب أحد هذه الأمثلة:",
    "analyzer.example.sms": "رسالة SMS مشبوهة",
    "analyzer.example.email": "بريد إلكتروني",
    "analyzer.example.link": "رابط مشبوه",
    "analyzer.riskLevel": "مستوى الخطر",
    "analyzer.redFlags": "العلامات التحذيرية",
    "analyzer.analysis": "التحليل",
    "analyzer.whatToDo": "ماذا يجب أن تفعل؟",
    "analyzer.loadingMsg": "جاري تحليل الرسالة...",

    // Legal
    "legal.title": "الوعي القانوني السيبراني",
    "legal.subtitle": "هل تعرف القوانين التونسية المتعلقة بالجرائم الإلكترونية؟",
    "legal.question": "السؤال",
    "legal.of": "من",
    "legal.score": "النتيجة",
    "legal.legalQ": "سؤال قانوني",
    "legal.explanation": "الشرح",
    "legal.next": "السؤال التالي",
    "legal.showResults": "عرض النتائج",
    "legal.complete": "اكتمل اختبار الوعي القانوني!",
    "legal.correctCount": "أجبت بشكل صحيح على",
    "legal.questions": "أسئلة",
    "legal.excellent": "ممتاز! لديك وعي جيد بالقوانين السيبرانية التونسية",
    "legal.needMore": "تحتاج لمعرفة المزيد عن القوانين لحماية نفسك",
    "legal.restart": "أعد الاختبار",

    // Risk meter
    "risk.safe": "آمن",
    "risk.suspicious": "مشبوه",
    "risk.dangerous": "خطير",

    // Phone
    "phone.unknown": "رقم مجهول",

    // News
    "nav.news": "أخبار سيبرانية",
    "news.title": "آخر التهديدات السيبرانية",
    "news.subtitle": "أحدث حوادث وتهديدات الأمن السيبراني المتعلقة بتونس",
    "news.loading": "جاري تحميل الأخبار بالذكاء الاصطناعي...",
    "news.error": "خطأ",
    "news.retry": "إعادة المحاولة",
    "news.whatHappened": "ماذا حدث؟",
    "news.whyMatters": "لماذا هذا مهم؟",
    "news.lessons": "دروس مستفادة",
    "news.actions": "إجراءات وقائية",
    "news.refresh": "تحديث الأخبار",

    // Legal extra
    "legal.generating": "جاري إنشاء الأسئلة بالذكاء الاصطناعي...",
    "legal.error": "خطأ",
    "legal.retry": "إعادة المحاولة",

    // Tips
    "nav.tips": "نصائح",
    "tips.title": "نصائح الحماية الرقمية",
    "tips.subtitle": "أهم النصائح لحماية نفسك من التهديدات السيبرانية في تونس",
    "tips.passwords": "كلمات المرور",
    "tips.passwordsDesc": "استخدم كلمات مرور قوية ومختلفة لكل حساب. يجب أن تحتوي على أحرف كبيرة وصغيرة وأرقام ورموز. لا تستخدم نفس كلمة المرور في أكثر من موقع.",
    "tips.passwordsTip": "استخدم مدير كلمات المرور مثل Bitwarden أو 1Password",
    "tips.links": "الروابط المشبوهة",
    "tips.linksDesc": "لا تضغط على أي رابط من رسالة SMS أو بريد إلكتروني غير متوقع. تحقق دائماً من عنوان الموقع قبل إدخال بياناتك. الروابط بنطاقات .xyz, .tk, .ml غالباً مزيفة.",
    "tips.linksTip": "مرّر الماوس على الرابط لرؤية العنوان الحقيقي قبل الضغط",
    "tips.twoFactor": "المصادقة الثنائية",
    "tips.twoFactorDesc": "فعّل المصادقة الثنائية (2FA) في كل حساباتك المهمة — البريد الإلكتروني، البنك، الشبكات الاجتماعية. هذا يحمي حسابك حتى لو سُرقت كلمة المرور.",
    "tips.twoFactorTip": "استخدم تطبيق Google Authenticator بدلاً من SMS للأمان الإضافي",
    "tips.wifi": "شبكات الواي فاي",
    "tips.wifiDesc": "لا تستخدم شبكات الواي فاي العامة للمعاملات البنكية أو إدخال كلمات المرور. الشبكات المفتوحة في المقاهي والمطارات يمكن أن تكون فخاً لسرقة بياناتك.",
    "tips.wifiTip": "استخدم VPN عند الاتصال بشبكة عامة",
    "tips.socialEng": "الهندسة الاجتماعية",
    "tips.socialEngDesc": "المحتالون يستخدمون الاستعجال والخوف والطمع للتلاعب بك. إذا تلقيت رسالة تطلب منك التصرف فوراً — توقف وفكّر. لا مؤسسة رسمية تطلب بياناتك عبر SMS.",
    "tips.socialEngTip": "قاعدة ذهبية: إذا كان العرض أحسن من اللازم، فهو احتيال",
    "tips.privacy": "الخصوصية",
    "tips.privacyDesc": "لا تشارك معلوماتك الشخصية (رقم الهوية، الحساب البنكي) مع أي جهة عبر الإنترنت إلا إذا تحققت من هويتها. راجع إعدادات الخصوصية في حساباتك.",
    "tips.privacyTip": "حدّث إعدادات الخصوصية في فيسبوك وإنستغرام بانتظام",
    "tips.learnMore": "تعلّم المزيد",
    "tips.ctaDesc": "جرّب المحاكاة التفاعلية لتدريب نفسك على اكتشاف الاحتيال",
    "tips.protip": "نصيحة احترافية",
    "tips.categories": "فئات النصائح",

    // Game
    "game.xp": "XP",
    "game.rank": "الرتبة",
    "game.streak": "سلسلة",
    "game.combo": "كومبو",
    "game.speedBonus": "مكافأة السرعة!",
    "game.rookie": "مبتدئ",
    "game.agent": "عميل",
    "game.expert": "خبير",
    "game.elite": "نخبة",
    "game.levelUp": "ترقية!",
    "game.accuracy": "الدقة",
    "game.bestStreak": "أفضل سلسلة",
    "game.totalXP": "مجموع XP",
    "game.timeUp": "انتهى الوقت!",
    "game.xpEarned": "XP مكتسب",
  },
  en: {
    "nav.home": "Home",
    "nav.simulator": "Simulator",
    "nav.analyzer": "Scam Analyzer",
    "nav.legal": "Legal Awareness",

    "hero.alert": "Cyber threats are increasing in Tunisia",
    "hero.title1": "Protect yourself from",
    "hero.title2": "Digital Threats",
    "hero.subtitle": "An AI-powered interactive training simulator — learn to detect phishing, scams, and real digital risks in Tunisia",
    "hero.cta": "Start Training",
    "hero.cta2": "Analyze a suspicious message",
    "hero.threat.sms": "SMS Phishing",
    "hero.threat.wifi": "WiFi Fraud",
    "hero.threat.password": "Password Theft",
    "hero.threat.privacy": "Privacy Breach",
    "hero.threat.fake": "Fake Websites",

    "features.title": "Protection Tools",
    "features.subtitle": "Everything you need to protect yourself from cyber threats",
    "features.sim.title": "Phishing Simulator",
    "features.sim.desc": "Practice detecting real phishing messages targeting Tunisians — from Poste Tunisienne to banks and WhatsApp",
    "features.analyzer.title": "AI Scam Analyzer",
    "features.analyzer.desc": "Paste any suspicious message or link and get instant risk analysis with simple explanations",
    "features.legal.title": "Legal Awareness",
    "features.legal.desc": "Learn about Tunisian cyber crime laws through interactive scenarios",
    "features.start": "Start Now",

    "stats.attacks": "Increase in cyber attacks in Tunisia",
    "stats.unaware": "of Tunisians don't know how to protect themselves",
    "stats.phishing": "Phishing is the most common threat",

    "footer.desc": "An educational project to protect Tunisian citizens from digital threats",

    "sim.title": "Phishing Simulator",
    "sim.subtitle": "Can you tell the difference between real and fake messages?",
    "sim.score": "Score",
    "sim.scenario": "Scenario",
    "sim.question": "What do you think of this message?",
    "sim.safe": "Safe — I trust it",
    "sim.suspicious": "Suspicious — Not sure",
    "sim.scam": "Scam — I don't trust it",
    "sim.analyzing": "AI is analyzing...",
    "sim.correct": "Correct!",
    "sim.wrong": "Wrong answer!",
    "sim.correctAnswer": "Correct answer",
    "sim.analysis": "Analysis",
    "sim.redFlags": "Red Flags",
    "sim.tactic": "Psychological Tactic Used",
    "sim.advice": "Advice",
    "sim.next": "Next Scenario",
    "sim.showResults": "Show Results",
    "sim.complete": "Training Complete!",
    "sim.correctCount": "You answered correctly",
    "sim.of": "out of",
    "sim.scenarios": "scenarios",
    "sim.excellent": "Excellent! You're aware of cyber threats",
    "sim.needMore": "You need more training to protect yourself",
    "sim.restart": "Restart Training",
    "sim.easy": "Easy",
    "sim.medium": "Medium",
    "sim.hard": "Hard",
    "sim.answerScam": "Scam",
    "sim.answerSuspicious": "Suspicious",
    "sim.answerSafe": "Safe",
    "sim.generating": "Generating scenarios with AI...",
    "sim.error": "Error",
    "sim.retry": "Retry",

    "analyzer.title": "AI Scam Analyzer",
    "analyzer.subtitle": "Paste any suspicious message or link for instant analysis",
    "analyzer.placeholder": "Paste the suspicious message here...",
    "analyzer.chars": "chars",
    "analyzer.inputHint": "SMS, email, or URL",
    "analyzer.clear": "Clear",
    "analyzer.analyze": "Analyze",
    "analyzer.analyzing": "Analyzing...",
    "analyzer.tryExamples": "Or try one of these examples:",
    "analyzer.example.sms": "Suspicious SMS",
    "analyzer.example.email": "Email",
    "analyzer.example.link": "Suspicious Link",
    "analyzer.riskLevel": "Risk Level",
    "analyzer.redFlags": "Red Flags",
    "analyzer.analysis": "Analysis",
    "analyzer.whatToDo": "What should you do?",
    "analyzer.loadingMsg": "Analyzing message...",

    "legal.title": "Cyber Legal Awareness",
    "legal.subtitle": "Do you know Tunisian cyber crime laws?",
    "legal.question": "Question",
    "legal.of": "of",
    "legal.score": "Score",
    "legal.legalQ": "Legal Question",
    "legal.explanation": "Explanation",
    "legal.next": "Next Question",
    "legal.showResults": "Show Results",
    "legal.complete": "Legal Awareness Test Complete!",
    "legal.correctCount": "You answered correctly",
    "legal.questions": "questions",
    "legal.excellent": "Excellent! You have good knowledge of Tunisian cyber laws",
    "legal.needMore": "You need to learn more about cyber laws to protect yourself",
    "legal.restart": "Restart Test",

    "risk.safe": "Safe",
    "risk.suspicious": "Suspicious",
    "risk.dangerous": "Dangerous",

    "phone.unknown": "Unknown number",

    // Dashboard
    "nav.news": "Cyber News",
    "news.title": "Latest Cyber Threats",
    "news.subtitle": "Recent cybersecurity incidents and threats related to Tunisia",
    "news.loading": "Loading news with AI...",
    "news.error": "Error",
    "news.retry": "Retry",
    "news.whatHappened": "What happened?",
    "news.whyMatters": "Why does it matter?",
    "news.lessons": "Key takeaways",
    "news.actions": "Preventive actions",
    "news.refresh": "Refresh news",

    "legal.generating": "Generating questions with AI...",
    "legal.error": "Error",
    "legal.retry": "Retry",

    // Tips
    "nav.tips": "Tips",
    "tips.title": "Digital Protection Tips",
    "tips.subtitle": "Essential tips to protect yourself from cyber threats in Tunisia",
    "tips.passwords": "Passwords",
    "tips.passwordsDesc": "Use strong, unique passwords for each account. Include uppercase, lowercase, numbers, and symbols. Never reuse passwords across sites.",
    "tips.passwordsTip": "Use a password manager like Bitwarden or 1Password",
    "tips.links": "Suspicious Links",
    "tips.linksDesc": "Never click links from unexpected SMS or emails. Always check the URL before entering your data. Links with .xyz, .tk, .ml domains are often fake.",
    "tips.linksTip": "Hover over links to see the real URL before clicking",
    "tips.twoFactor": "Two-Factor Authentication",
    "tips.twoFactorDesc": "Enable 2FA on all important accounts — email, banking, social media. This protects your account even if your password is stolen.",
    "tips.twoFactorTip": "Use Google Authenticator instead of SMS for extra security",
    "tips.wifi": "WiFi Networks",
    "tips.wifiDesc": "Don't use public WiFi for banking or entering passwords. Open networks in cafes and airports can be traps to steal your data.",
    "tips.wifiTip": "Use a VPN when connecting to public networks",
    "tips.socialEng": "Social Engineering",
    "tips.socialEngDesc": "Scammers use urgency, fear, and greed to manipulate you. If a message asks you to act immediately — stop and think. No official institution asks for your data via SMS.",
    "tips.socialEngTip": "Golden rule: If the offer is too good to be true, it's a scam",
    "tips.privacy": "Privacy",
    "tips.privacyDesc": "Don't share personal info (ID number, bank account) with anyone online unless you've verified their identity. Review your privacy settings regularly.",
    "tips.privacyTip": "Update your Facebook and Instagram privacy settings regularly",
    "tips.learnMore": "Learn More",
    "tips.ctaDesc": "Try the interactive simulation to train yourself on detecting scams",
    "tips.protip": "Pro Tip",
    "tips.categories": "Tip Categories",

    // Game
    "game.xp": "XP",
    "game.rank": "Rank",
    "game.streak": "Streak",
    "game.combo": "Combo",
    "game.speedBonus": "Speed bonus!",
    "game.rookie": "Rookie",
    "game.agent": "Agent",
    "game.expert": "Expert",
    "game.elite": "Elite",
    "game.levelUp": "Level Up!",
    "game.accuracy": "Accuracy",
    "game.bestStreak": "Best Streak",
    "game.totalXP": "Total XP",
    "game.timeUp": "Time's up!",
    "game.xpEarned": "XP Earned",
  },
  fr: {
    "nav.home": "Accueil",
    "nav.simulator": "Simulateur",
    "nav.analyzer": "Analyseur de fraude",
    "nav.legal": "Sensibilisation juridique",

    "hero.alert": "Les cybermenaces augmentent en Tunisie",
    "hero.title1": "Protegez-vous contre",
    "hero.title2": "les menaces numeriques",
    "hero.subtitle": "Un simulateur de formation interactif propulse par l'IA — apprenez a detecter le phishing, les arnaques et les risques numeriques reels en Tunisie",
    "hero.cta": "Commencer l'entrainement",
    "hero.cta2": "Analyser un message suspect",
    "hero.threat.sms": "Phishing SMS",
    "hero.threat.wifi": "Fraude WiFi",
    "hero.threat.password": "Vol de mots de passe",
    "hero.threat.privacy": "Violation de vie privee",
    "hero.threat.fake": "Faux sites web",

    "features.title": "Outils de protection",
    "features.subtitle": "Tout ce dont vous avez besoin pour vous proteger contre les cybermenaces",
    "features.sim.title": "Simulateur de phishing",
    "features.sim.desc": "Entrainez-vous a detecter les vrais messages de phishing ciblant les Tunisiens — de la Poste Tunisienne aux banques et WhatsApp",
    "features.analyzer.title": "Analyseur de fraude IA",
    "features.analyzer.desc": "Collez n'importe quel message ou lien suspect et obtenez une analyse instantanee du risque",
    "features.legal.title": "Sensibilisation juridique",
    "features.legal.desc": "Decouvrez les lois tunisiennes sur la cybercriminalite a travers des scenarios interactifs",
    "features.start": "Commencer",

    "stats.attacks": "Augmentation des cyberattaques en Tunisie",
    "stats.unaware": "des Tunisiens ne savent pas comment se proteger",
    "stats.phishing": "Le phishing est la menace la plus courante",

    "footer.desc": "Un projet educatif pour proteger les citoyens tunisiens contre les menaces numeriques",

    "sim.title": "Simulateur de phishing",
    "sim.subtitle": "Pouvez-vous distinguer les vrais messages des faux ?",
    "sim.score": "Score",
    "sim.scenario": "Scenario",
    "sim.question": "Que pensez-vous de ce message ?",
    "sim.safe": "Sur — Je lui fais confiance",
    "sim.suspicious": "Suspect — Pas sur",
    "sim.scam": "Arnaque — Je ne lui fais pas confiance",
    "sim.analyzing": "L'IA analyse...",
    "sim.correct": "Bonne reponse !",
    "sim.wrong": "Mauvaise reponse !",
    "sim.correctAnswer": "Bonne reponse",
    "sim.analysis": "Analyse",
    "sim.redFlags": "Signaux d'alerte",
    "sim.tactic": "Tactique psychologique utilisee",
    "sim.advice": "Conseil",
    "sim.next": "Scenario suivant",
    "sim.showResults": "Voir les resultats",
    "sim.complete": "Entrainement termine !",
    "sim.correctCount": "Vous avez repondu correctement a",
    "sim.of": "sur",
    "sim.scenarios": "scenarios",
    "sim.excellent": "Excellent ! Vous etes conscient des cybermenaces",
    "sim.needMore": "Vous avez besoin de plus d'entrainement",
    "sim.restart": "Recommencer",
    "sim.easy": "Facile",
    "sim.medium": "Moyen",
    "sim.hard": "Difficile",
    "sim.answerScam": "Arnaque",
    "sim.answerSuspicious": "Suspect",
    "sim.answerSafe": "Sur",
    "sim.generating": "Generation des scenarios par IA...",
    "sim.error": "Erreur",
    "sim.retry": "Reessayer",

    "analyzer.title": "Analyseur de fraude IA",
    "analyzer.subtitle": "Collez n'importe quel message suspect pour une analyse instantanee",
    "analyzer.placeholder": "Collez le message suspect ici...",
    "analyzer.chars": "caracteres",
    "analyzer.inputHint": "SMS, e-mail ou URL",
    "analyzer.clear": "Effacer",
    "analyzer.analyze": "Analyser",
    "analyzer.analyzing": "Analyse en cours...",
    "analyzer.tryExamples": "Ou essayez un de ces exemples :",
    "analyzer.example.sms": "SMS suspect",
    "analyzer.example.email": "E-mail",
    "analyzer.example.link": "Lien suspect",
    "analyzer.riskLevel": "Niveau de risque",
    "analyzer.redFlags": "Signaux d'alerte",
    "analyzer.analysis": "Analyse",
    "analyzer.whatToDo": "Que devez-vous faire ?",
    "analyzer.loadingMsg": "Analyse du message...",

    "legal.title": "Sensibilisation juridique cyber",
    "legal.subtitle": "Connaissez-vous les lois tunisiennes sur la cybercriminalite ?",
    "legal.question": "Question",
    "legal.of": "sur",
    "legal.score": "Score",
    "legal.legalQ": "Question juridique",
    "legal.explanation": "Explication",
    "legal.next": "Question suivante",
    "legal.showResults": "Voir les resultats",
    "legal.complete": "Test termine !",
    "legal.correctCount": "Vous avez repondu correctement a",
    "legal.questions": "questions",
    "legal.excellent": "Excellent ! Vous connaissez bien les lois cyber tunisiennes",
    "legal.needMore": "Vous devez en apprendre plus sur les lois pour vous proteger",
    "legal.restart": "Recommencer le test",

    "risk.safe": "Sur",
    "risk.suspicious": "Suspect",
    "risk.dangerous": "Dangereux",

    "phone.unknown": "Numero inconnu",

    // Dashboard
    "nav.news": "Actualites cyber",
    "news.title": "Dernieres menaces cyber",
    "news.subtitle": "Incidents et menaces de cybersecurite recents lies a la Tunisie",
    "news.loading": "Chargement des actualites par IA...",
    "news.error": "Erreur",
    "news.retry": "Reessayer",
    "news.whatHappened": "Que s'est-il passe ?",
    "news.whyMatters": "Pourquoi est-ce important ?",
    "news.lessons": "Lecons a retenir",
    "news.actions": "Actions preventives",
    "news.refresh": "Actualiser",

    "legal.generating": "Generation des questions par IA...",
    "legal.error": "Erreur",
    "legal.retry": "Reessayer",

    // Tips
    "nav.tips": "Conseils",
    "tips.title": "Conseils de protection numerique",
    "tips.subtitle": "Conseils essentiels pour vous proteger contre les cybermenaces en Tunisie",
    "tips.passwords": "Mots de passe",
    "tips.passwordsDesc": "Utilisez des mots de passe forts et uniques pour chaque compte. Incluez majuscules, minuscules, chiffres et symboles. Ne reutilisez jamais les mots de passe.",
    "tips.passwordsTip": "Utilisez un gestionnaire comme Bitwarden ou 1Password",
    "tips.links": "Liens suspects",
    "tips.linksDesc": "Ne cliquez jamais sur des liens provenant de SMS ou e-mails inattendus. Verifiez toujours l'URL avant de saisir vos donnees. Les domaines .xyz, .tk, .ml sont souvent faux.",
    "tips.linksTip": "Survolez les liens pour voir l'URL reelle avant de cliquer",
    "tips.twoFactor": "Authentification a deux facteurs",
    "tips.twoFactorDesc": "Activez la 2FA sur tous vos comptes importants — e-mail, banque, reseaux sociaux. Cela protege votre compte meme si votre mot de passe est vole.",
    "tips.twoFactorTip": "Utilisez Google Authenticator au lieu des SMS pour plus de securite",
    "tips.wifi": "Reseaux WiFi",
    "tips.wifiDesc": "N'utilisez pas le WiFi public pour les operations bancaires. Les reseaux ouverts dans les cafes et aeroports peuvent etre des pieges.",
    "tips.wifiTip": "Utilisez un VPN sur les reseaux publics",
    "tips.socialEng": "Ingenierie sociale",
    "tips.socialEngDesc": "Les escrocs utilisent l'urgence, la peur et la cupidite pour vous manipuler. Si un message vous demande d'agir immediatement — arretez-vous et reflechissez.",
    "tips.socialEngTip": "Regle d'or : Si l'offre est trop belle, c'est une arnaque",
    "tips.privacy": "Vie privee",
    "tips.privacyDesc": "Ne partagez pas vos informations personnelles (numero d'identite, compte bancaire) avec quiconque en ligne sans verifier leur identite.",
    "tips.privacyTip": "Mettez a jour vos parametres de confidentialite regulierement",
    "tips.learnMore": "En savoir plus",
    "tips.ctaDesc": "Essayez la simulation interactive pour vous entrainer a detecter les arnaques",
    "tips.protip": "Conseil pro",
    "tips.categories": "Categories de conseils",

    // Game
    "game.xp": "XP",
    "game.rank": "Rang",
    "game.streak": "Serie",
    "game.combo": "Combo",
    "game.speedBonus": "Bonus de vitesse !",
    "game.rookie": "Recrue",
    "game.agent": "Agent",
    "game.expert": "Expert",
    "game.elite": "Elite",
    "game.levelUp": "Niveau superieur !",
    "game.accuracy": "Precision",
    "game.bestStreak": "Meilleure serie",
    "game.totalXP": "XP Total",
    "game.timeUp": "Temps ecoule !",
    "game.xpEarned": "XP gagne",
  },
};

interface I18nContextType {
  locale: Locale;
  setLocale: (l: Locale) => void;
  t: (key: string) => string;
  dir: "rtl" | "ltr";
}

const I18nContext = createContext<I18nContextType>({
  locale: "ar",
  setLocale: () => {},
  t: (key: string) => key,
  dir: "rtl",
});

export function I18nProvider({ children }: { children: ReactNode }) {
  const [locale, setLocale] = useState<Locale>("ar");

  const t = useCallback(
    (key: string) => translations[locale][key] || translations.ar[key] || key,
    [locale]
  );

  const dir = locale === "ar" ? "rtl" : "ltr";

  return (
    <I18nContext.Provider value={{ locale, setLocale, t, dir }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  return useContext(I18nContext);
}
